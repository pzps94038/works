{"version":3,"sources":["scripts/main.js"],"names":["getElemt","elemt","document","querySelector","cards","Selector","cardTitle","options","tags","xhr","XMLHttpRequest","open","send","onload","str","JSON","parse","responseText","data","result","records","menuSelect","e","select","ZoneList","i","length","push","Zone","zone","Array","from","Set","innerHTML","update","$data","cont","Name","Picture1","Opentime","Add","Tel","Ticketinfo","defaultList","changeFun","$target","value","totalPages","querySelectorAll","perPage","currentPage","Math","ceil","console","log","events","option","target","closest","tag","addEventListener"],"mappings":"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","file":"all.js","sourcesContent":["const getElemt = function (elemt) {\n  return document.querySelector(elemt);\n}\nconst cards = getElemt('.card-box');\nconst Selector = getElemt('.select-wrap ol');\nconst cardTitle = getElemt('.card-title');\nconst options = getElemt('.select-wrap');\nconst tags = getElemt('.tags');\n\nconst xhr = new XMLHttpRequest();\nxhr.open('get', 'https://data.kcg.gov.tw/api/action/datastore_search?resource_id=92290ee5-6e61-456f-80c0-249eae2fcc97', true)\nxhr.send(null);\nxhr.onload = function () {\n  const str = JSON.parse(xhr.responseText)\n  const data = str.result.records;\n\n  function menuSelect(e) {\n    let select = '';\n    let ZoneList = [];\n\n    // 把轉出來的字串 push 到空陣列裡\n    for (let i = 0; i < data.length; i++) {\n      ZoneList.push(data[i].Zone);\n    }\n    // 取出不重複地區物件\n    let zone = Array.from(new Set(ZoneList));\n\n    // 把取出來的資料帶入選單\n    for (let i = 0; i < zone.length; i++) {\n      select += `\n        <li><input type=\"radio\" id=\"list[${i + 1}]\" value=\"${zone[i]}\" name=\"city\"><label class=\"select-option\" for=\"list[${i + 1}]\">${zone[i]}</label></li>`\n    }\n    Selector.innerHTML = select;\n  }\n \n  function update($data){\n    let cont = `\n    <li class=\"card-item\">\n      <div class=\"card-img\">\n        <div class=\"card-txt\">\n          <div class=\"name\">${$data.Name}</div>\n          <div class=\"zone\">${$data.Zone}</div>\n        </div><img src=\"${$data.Picture1}\" alt=\"${$data.Name}\">\n      </div>\n      <div class=\"card-cont\">\n        <p class=\"opentime\">\n          <i class=\"material-icons\">watch_later</i><span>${$data.Opentime}</span></p>\n        <p class=\"add\">\n          <i class=\"material-icons\">place</i><a href=\"https://www.google.com.tw/maps/search/${$data.Name}${$data.Add}\" target=\"_blank\">${$data.Add}</a>\n        </p>\n        <p class=\"tel\"><i class=\"material-icons\">smartphone</i><a href=\"tel:${$data.Tel}\">${$data.Tel}</a></p>\n        <p class=\"ticketinfo\"><i class=\"material-icons\">local_offer</i>${$data.Ticketinfo}</p>\n      </div>\n    </li>`\n    cards.innerHTML += cont;\n  }\n  \n  function defaultList(){\n    for(let i=0; i<data.length; i++){\n      update(data[i]);\n    }\n    cardTitle.innerHTML = '高雄全區'\n  }\n\n  function changeFun($target){\n    if( !$target ) { return };\n    cards.innerHTML = '';\n    for(let i=0; i<data.length; i++){\n      if($target.value === data[i].Zone) {\n        update(data[i]);\n        cardTitle.innerHTML = data[i].Zone;\n      } else if ( $target.value === '高雄全區' ) {\n        update(data[i]);\n        cardTitle.innerHTML = '高雄全區'\n      }\n    }\n\n    // 計算頁數\n    let totalPages = document.querySelectorAll('.card-item').length;\n    let perPage = 6;\n    let currentPage = Math.ceil(totalPages / perPage);\n    console.log(currentPage)\n  }\n\n  function events(e) {\n    const option = e.target.closest('.select-wrap li input');\n    const tag = e.target.closest('.tags button');\n    changeFun(option)\n    changeFun(tag)\n  }\n\n  options.addEventListener('change', events );\n  tags.addEventListener('click', events );\n  menuSelect();\n  defaultList();\n  \n}\n\n"]}