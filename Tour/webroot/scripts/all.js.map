{"version":3,"sources":["scripts/main.js"],"names":["getElemt","elemt","document","querySelector","xhr","XMLHttpRequest","cards","Selector","cardTitle","options","tags","open","send","onload","str","JSON","parse","responseText","data","result","records","menuSelect","e","select","ZoneList","i","length","push","Zone","zone","Array","from","Set","innerHTML","update","$data","cont","Name","Picture1","Opentime","Add","Tel","Ticketinfo","defaultList","changeFun","$target","value","pages","pagination","dataTotal","perPage","pageTotal","Math","ceil","pageList","total","displayPage","pageCont","switchPage","page","target","dataset","nodeName","console","log","events","option","closest","tag","addEventListener"],"mappings":"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","file":"all.js","sourcesContent":["const getElemt = function (elemt) {\n  return document.querySelector(elemt)\n}\nconst xhr = new XMLHttpRequest()\nconst cards = getElemt('.card-box')\nconst Selector = getElemt('.select-wrap ol')\nconst cardTitle = getElemt('.card-title')\nconst options = getElemt('.select-wrap')\nconst tags = getElemt('.tags')\n\nxhr.open('get', 'https://data.kcg.gov.tw/api/action/datastore_search?resource_id=92290ee5-6e61-456f-80c0-249eae2fcc97', true)\nxhr.send(null);\nxhr.onload = function () {\n  let str = JSON.parse(xhr.responseText);\n  let data = str.result.records;\n\n  // 下拉選單\n  function menuSelect(e) {\n    let select = '';\n    let ZoneList = [];\n\n    // 把轉出來的字串 push 到空陣列裡\n    for (let i = 0; i < data.length; i++) {\n      ZoneList.push(data[i].Zone);\n    }\n    // 取出不重複地區物件\n    let zone = Array.from(new Set(ZoneList));\n\n    // 把取出來的資料帶入選單\n    for (let i = 0; i < zone.length; i++) {\n      select += `\n        <li><input type=\"radio\" id=\"list[${i + 1}]\" value=\"${zone[i]}\" name=\"city\"><label class=\"select-option\" for=\"list[${i + 1}]\">${zone[i]}</label></li>`\n    }\n    Selector.innerHTML = select;\n  }\n  \n  // 資料更新\n  function update($data){\n    let cont = `\n    <li class=\"card-item\">\n      <div class=\"card-img\">\n        <div class=\"card-txt\">\n          <div class=\"name\">${$data.Name}</div>\n          <div class=\"zone\">${$data.Zone}</div>\n        </div><img src=\"${$data.Picture1}\" alt=\"${$data.Name}\">\n      </div>\n      <div class=\"card-cont\">\n        <p class=\"opentime\">\n          <i class=\"material-icons\">watch_later</i><span>${$data.Opentime}</span></p>\n        <p class=\"add\">\n          <i class=\"material-icons\">place</i><a href=\"https://www.google.com.tw/maps/search/${$data.Name}${$data.Add}\" target=\"_blank\">${$data.Add}</a>\n        </p>\n        <p class=\"tel\"><i class=\"material-icons\">smartphone</i><a href=\"tel:${$data.Tel}\">${$data.Tel}</a></p>\n        <p class=\"ticketinfo\"><i class=\"material-icons\">local_offer</i>${$data.Ticketinfo}</p>\n      </div>\n    </li>`\n    cards.innerHTML += cont;\n  }\n  \n  // 預設顯示高雄全區資料\n  function defaultList(){\n    for(let i=0; i<data.length; i++){\n      update(data[i]);\n    }\n    cardTitle.innerHTML = '高雄全區'\n  }\n\n  // 切換內容\n  function changeFun($target){\n    if( !$target ) { return };\n    cards.innerHTML = '';\n    for(let i=0; i<data.length; i++){\n      if($target.value === data[i].Zone) {\n        update(data[i]);\n        cardTitle.innerHTML = data[i].Zone;\n      } else if ( $target.value === '高雄全區' ) {\n        update(data[i]);\n        cardTitle.innerHTML = '高雄全區'\n      }\n    }\n  }\n\n\n\n\n\n\n\n\n  // 計算頁數\n  const pages = getElemt('.page-list');\n  function pagination ($data){\n    const dataTotal = $data.length;\n    const perPage = 6;\n    const pageTotal = Math.ceil(dataTotal / perPage);\n\n    // 回傳運算結果\n    return{dataTotal, perPage, pageTotal} \n  }\n\n  // 用物件方式傳遞資料\n  const pageList = {\n    total: pagination(data).pageTotal\n  }\n\n  // 顯示頁碼\n  function displayPage (){\n    let pageCont = '';\n\n    for( let i=0; i<pageList.total; i++) {\n      pageCont += `<li data-page=\"${i + 1}\">${i + 1}</li>`\n    }\n    pages.innerHTML = pageCont; // 顯示全部頁數\n    \n  }\n  displayPage()\n\n  // 頁碼按鈕\n  function switchPage(e){\n    const page = e.target.dataset.page;\n    if ( e.target.nodeName !== 'LI' ) return\n    console.log(page)\n  }\n \n\n\n\n\n\n\n\n  // 切換內容事件\n  function events(e) {\n    const option = e.target.closest('.select-wrap li input');\n    const tag = e.target.closest('.tags button');\n    changeFun(option)\n    changeFun(tag)\n  }\n\n  // 監聽事件\n  options.addEventListener('change', events );\n  tags.addEventListener('click', events );\n  pages.addEventListener('click', switchPage);\n  menuSelect();\n  defaultList();\n\n}\n\n"]}