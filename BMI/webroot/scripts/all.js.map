{"version":3,"sources":["scripts/main.js"],"names":["getElement","elem","document","querySelector","colors","height","weight","result","btn","bmi","msg","renew","recordBox","save","JSON","parse","localStorage","getItem","update","recordItem","cont","i","length","color","txt","date","innerHTML","calculate","$w","value","$h","$bmi","Math","round","pow","textContent","style","display","tag","changeColor","_bmi","_weight","_height","_msg","_tag","saveLS","obj","nowDate","_date","time","_time","push","sort","a","b","Date","toString","stringify","setItem","$color","background","$date","today","YY","getFullYear","MM","getMonth","dd","getDate","tt","getTime","inputs","querySelectorAll","blurCheck","$input","chk","trim","isNaN","classList","add","remove","_chk","checkFun","alert_msg","alert_chk","alert","forEach","$item","addEventListener","renewFun","clearData","e","$clear","target","dataset","clear","splice","entKey","keyCtrl","keyCode","body"],"mappings":"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","file":"all.js","sourcesContent":["function getElement(elem) {\n    return document.querySelector(elem);\n}\nconst colors = ['#86D73F', '#31BAF9', '#FF982D', '#FF6C03', '#FF1200']; // 顏色設定\nconst height = getElement('#v_height'); // 身高\nconst weight = getElement('#v_weight'); // 體重\nconst result = getElement('#result'); // 顯示結果\nconst btn = getElement('#btn-calculator'); // 計算按鈕\n\nconst bmi = getElement('.rst-num');\nconst msg = getElement('.rst-msg');\nconst renew = getElement('#btn-result'); // 重新輸入按鈕\nconst recordBox = getElement('.listBox'); // 顯示列表\n\nconst save = JSON.parse(localStorage.getItem('record')) || [];\n\n// ----- 產生列表 ----- //\nfunction update(recordItem) {\n    let cont = '';\n    for (let i=0; i<recordItem.length; i++) {\n        cont += \n        `<li data-list=${i}>\n            <div class=\"list-msg\">\n                <span class=\"tag ${recordItem[i].color}\"></span>\n                <span class=\"txt\">${recordItem[i].txt}</span>\n            </div>\n            <div class=\"list-bmi\">${recordItem[i].bmi}</div>\n            <div class=\"list-weight\">${recordItem[i].weight}kg</div>\n            <div class=\"list-height\">${recordItem[i].height}cm</div>\n            <div class=\"list-date\">${recordItem[i].date}</div>\n            <i class=\"material-icons delete\"  data-clear=\"${i}\">delete</i>\n        </li>`\n    }\n\n    // 判斷沒有資料時，顯示文字\n    if (save.length >= 1) {\n        recordBox.innerHTML = cont;\n    } else {\n        recordBox.innerHTML = '還沒有BMI紀錄，快來面對現實吧！';\n    }\n}\n\n// ----- 計算 BMI ----- //\nfunction calculate() {\n    let $w = weight.value;\n    let $h = height.value/100;\n    let $bmi = Math.round( ($w/Math.pow($h, 2)) * 100 ) / 100;\n    bmi.textContent = $bmi;\n    result.style.display = 'block';\n    btn.style.display = 'none';\n    let tag = '';\n\n    // 判斷 BMI 範圍\n    if ( $bmi <= 18.5 ) {\n        changeColor(colors[1]);\n        tag = 'blue';\n        msg.textContent = '過輕';\n    } else if ( 18.5 < $bmi && $bmi <= 25 ) {\n        changeColor(colors[0]);\n        tag = 'green';\n        msg.textContent = '理想';\n    } else if ( 25 < $bmi && $bmi <= 30 ) {\n        changeColor(colors[2]);\n        tag = 'orange1';\n        msg.textContent = '過重';\n    } else if ( 30 < $bmi && $bmi <= 35 ) {\n        changeColor(colors[3]);\n        tag = 'orange2';\n        msg.textContent = '輕度肥胖';\n    } else if ( 35 < $bmi && $bmi <= 40 ) {\n        changeColor(colors[3]);\n        tag = 'orange2';\n        msg.textContent = '中度肥胖';\n    } else if ( 40 < $bmi ) {\n        changeColor(colors[4]);\n        tag = 'red';\n        msg.textContent = '重度肥胖';\n    }\n    return {\n        _bmi: $bmi, \n        _weight: weight.value, \n        _height: height.value, \n        _msg: msg.textContent, \n        _tag: tag\n    }\n}\n\n// ----- 儲存 LocalStorage ----- //\nfunction saveLS () {\n    // LS 陣列\n    let obj = {\n        color: calculate()._tag,\n        txt: calculate()._msg,\n        bmi: calculate()._bmi,\n        weight: calculate()._weight,\n        height: calculate()._height,\n        date:  nowDate()._date,\n        time: nowDate()._time\n    }\n    // 把陣列加進 save 儲存庫裡\n    save.push(obj);\n\n    // 新增資料按照建立時間排序\n    save.sort(function(a, b){\n        return new Date(b.time) - new Date(a.time); \n    })\n\n    // 儲存並更新 LS\n    let toString = JSON.stringify(save);\n    localStorage.setItem('record', toString);\n    update(save);\n}\n\n// ----- 變更顏色 ----- //\nfunction changeColor($color) {\n    result.style.background = $color;\n    result.style.color = $color;\n    renew.style.background = $color;\n    return $color;\n}\n\n// ----- 抓取時間 ----- //\nfunction nowDate($date) {\n    let today = new Date();\n    let YY = today.getFullYear();\n    let MM = (today.getMonth() + 1 < 10 ? '0' : '')+(today.getMonth() + 1);\n    let dd = (today.getDate() < 10 ? '0' : '')+today.getDate();\n    let tt = today.getTime();\n    $date = MM + '-' + dd + '-' + YY ;\n    return {_date: $date, _time: tt};\n}\n\n// ----- 檢查 input 內容是否正確 ----- //\nconst inputs = document.querySelectorAll('.inputBox input');\nfunction blurCheck($input) {\n    const txt = [' 身高', ' 體重'];\n    let msg = '';   // 訊息\n    let chk = true; // 檢查布林值\n    for (let i=0; i<$input.length; i++) {\n        if ( $input[i].value == 0 || $input[i].value.trim() == '' || isNaN($input[i].value) ) {\n            $input[i].classList.add('focus');\n            msg += txt[i];\n            chk = false;\n        } else {\n            $input[i].classList.remove('focus');\n        }\n    }\n    return {_msg: msg, _chk: chk}\n}\n\nfunction checkFun() {\n    let alert_msg = blurCheck(inputs)._msg;\n    let alert_chk = blurCheck(inputs)._chk;\n    if ( alert_chk === true ) {\n        calculate();\n        saveLS();\n    } else {\n        alert('請輸入您的' + alert_msg);\n\n        inputs.forEach(function($item){\n            $item.addEventListener('blur', function(){\n                blurCheck(inputs);\n            });\n        })\n        return false;\n    }\n    renew.addEventListener('click', renewFun);\n}\n\n// ----- 重新輸入 ----- //\nfunction renewFun () {\n    height.value = '';\n    weight.value = '';\n    msg.textContent = '';\n    result.style.display = 'none';\n    btn.style.display = 'block';\n}\n\n// ----- 清除單筆資料 ----- //\nfunction clearData (e) {\n    let $clear = e.target.dataset.clear;\n    if ( !$clear ){ return }\n    \n    save.splice($clear, 1);\n    localStorage.setItem('record', JSON.stringify(save));\n    update(save);\n}\n\n// ----- 鍵盤控制 ----- //\nlet entKey = 0;\nfunction keyCtrl(e) {\n    let alert_chk = blurCheck(inputs)._chk;\n    if(e.keyCode === 13) { \n        if ( entKey === 1 ) {\n            entKey = 0;\n            renewFun();\n        } else if ( entKey == 0 && alert_chk !== true ) {\n            checkFun();\n        } else {\n            entKey = 1;\n            checkFun();\n        }\n    } else { return };\n}\n\n\n// ----- 更新與監聽 ----- //\nbtn.addEventListener('click', checkFun);\nrecordBox.addEventListener('click', clearData);\ndocument.body.addEventListener('keydown', keyCtrl);\nupdate(save);"]}