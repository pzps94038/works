{"version":3,"sources":["scripts/main.js"],"names":["getElemt","elemt","document","querySelector","xhr","XMLHttpRequest","cards","cardTitle","options","tags","pages","jsonData","open","send","onload","str","JSON","parse","responseText","result","records","status","addEventListener","events","switchPage","menuSelect","defaultList","pagination","console","log","e","all","select","ZoneList","i","length","push","Zone","zone","Array","from","Set","innerHTML","update","$data","cont","Name","Picture1","Opentime","Add","Tel","Ticketinfo","changeFun","$target","value","option","target","closest","tag","pageCont","dataTotal","perPage","pageTotal","Math","ceil","forEach","num","index","pageBtn","dataset","page","nodeName"],"mappings":"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","file":"all.js","sourcesContent":["const getElemt = function (elemt) {\n  return document.querySelector(elemt)\n}\nconst xhr = new XMLHttpRequest()\nconst cards = getElemt('.card-box')\nconst cardTitle = getElemt('.card-title')\nconst options = getElemt('.select-wrap ol')\nconst tags = getElemt('.tags')\nconst pages = getElemt('.page-list')\nlet jsonData;\n\nxhr.open('get', 'https://data.kcg.gov.tw/api/action/datastore_search?resource_id=92290ee5-6e61-456f-80c0-249eae2fcc97', true)\nxhr.send(null);\nxhr.onload = function () {\n  let str = JSON.parse(xhr.responseText);\n  jsonData = str.result.records; // 主要 data\n  if( xhr.status == 200 ){\n\n    // 監聽事件\n    options.addEventListener('change', events );\n    tags.addEventListener('click', events );\n    pages.addEventListener('click', switchPage );\n    menuSelect();\n    defaultList();\n    pagination(jsonData);\n  \n  } else { console.log('error:' + xhr.status )}\n  console.log(xhr.status)\n\n}\n\n\n// 下拉選單\nfunction menuSelect(e) {\n  let all = ''\n  let select = '';\n  let ZoneList = [];\n\n  // 把轉出來的字串 push 到空陣列裡\n  for (let i = 0; i < jsonData.length; i++) {\n    ZoneList.push(jsonData[i].Zone);\n  }\n  // 取出不重複地區物件\n  let zone = Array.from(new Set(ZoneList));\n\n  all += `\n  <li><input type=\"radio\" id=\"list[0]\" value=\"高雄全區\" name=\"city\"><label class=\"select-option\" for=\"list[0]\">高雄全區</label></li>`\n\n  // 把取出來的資料帶入選單\n  for (let i = 0; i < zone.length; i++) {\n    select += `\n      <li><input type=\"radio\" id=\"list[${i + 1}]\" value=\"${zone[i]}\" name=\"city\"><label class=\"select-option\" for=\"list[${i + 1}]\">${zone[i]}</label></li>`\n  }\n  options.innerHTML = all + select;\n}\n\n\n\n// 資料更新\nfunction update($data){\n  let cont = `\n  <li class=\"card-item\">\n    <div class=\"card-img\">\n      <div class=\"card-txt\">\n        <div class=\"name\">${$data.Name}</div>\n        <div class=\"zone\">${$data.Zone}</div>\n      </div><img src=\"${$data.Picture1}\" alt=\"${$data.Name}\">\n    </div>\n    <div class=\"card-cont\">\n      <p class=\"opentime\">\n        <i class=\"material-icons\">watch_later</i><span>${$data.Opentime}</span></p>\n      <p class=\"add\">\n        <i class=\"material-icons\">place</i><a href=\"https://www.google.com.tw/maps/search/${$data.Name}${$data.Add}\" target=\"_blank\">${$data.Add}</a>\n      </p>\n      <p class=\"tel\"><i class=\"material-icons\">smartphone</i><a href=\"tel:${$data.Tel}\">${$data.Tel}</a></p>\n      <p class=\"ticketinfo\"><i class=\"material-icons\">local_offer</i>${$data.Ticketinfo}</p>\n    </div>\n  </li>`\n  cards.innerHTML += cont;\n}\n\n// 預設顯示高雄全區資料\nfunction defaultList(){\n  for(let i=0; i<jsonData.length; i++){\n    update(jsonData[i]);\n  }\n  cardTitle.innerHTML = '高雄全區'\n}\n\n// 切換內容\nfunction changeFun($target){\n  if( !$target ) { return };\n  cards.innerHTML = '';\n  for(let i=0; i<jsonData.length; i++){\n    if($target.value === jsonData[i].Zone) {\n      update(jsonData[i]);\n      cardTitle.innerHTML = jsonData[i].Zone;\n    } else if ( $target.value === '高雄全區' ) {\n      update(jsonData[i]);\n      cardTitle.innerHTML = '高雄全區'\n    }\n  }\n}\n\n// 切換內容事件\nfunction events(e) {\n  const option = e.target.closest('.select-wrap li input');\n  const tag = e.target.closest('.tags button');\n  changeFun(option)\n  changeFun(tag)\n}\n\n\n// 計算並顯示頁碼\nfunction pagination($data){\n  let pageCont = '';\n  const dataTotal = jsonData.length;\n  const perPage = 6;\n  const pageTotal = Math.ceil(dataTotal / perPage);\n\n  // 如果內容>6，則頁碼索引+1\n  $data.forEach(function(num, index){\n    // num = 內容數量 index = 頁碼索引\n    if ( num > 6 ) {\n      index + 1\n    }\n  })\n\n  for( let i=0; i<pageTotal; i++) {\n    pageCont += `<li data-page=\"${i + 1}\">${i + 1}</li>`\n  }\n  pages.innerHTML = pageCont; // 顯示全部頁數\n}\n\nfunction switchPage(e){\n  const pageBtn = e.target.dataset.page;\n  if( e.target.nodeName !== 'LI' ) { return }\n  console.log(pageBtn)\n}\n\n\n\n\n"]}